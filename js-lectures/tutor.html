<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script src="src/ace.js" type="text/javascript"></script>
	<script src="src/theme-twilight.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
	window.onload = function() {
		var editor = ace.edit("editor");
		editor.setTheme('ace/theme/twilight');
		
		var test_vals = {0:1, 1:1, 2:2, 3:3, 4:5, 5:8, 6:13, 7:21, 8:34, 9:55};
		$('#run_button').click(function() {
			var fxn_string = editor.getSession().getValue();
			$('#code_return').empty('');
			try {
				eval(fxn_string);
				var is_correct = true;
				//var fib_fxn = new Function(fxn_string);
				for (var i = 0; i < 10; i++) {
					var answer = fib(i);
					$('#code_return').append('<br />' + answer);
					if (answer !== test_vals[i]) {
						$('#code_return').append(' WRONG');
						is_correct = false;
					}
				}
				
				if (is_correct) {
					$('#code_return').append('<br />CORRECT!');
				}
			} catch (e) {
				$('#code_return').val(e);
			}
		});
	};
	</script>
	<style type="text/css">
	#editor {
		position: relative;
		width: 500px;
		height: 400px;
	}
	</style>
</head>
<body>
	<p>Write a function that returns the n-th Fibonnaci number.</p>
	<div id="editor">var fib = function(n) {
	// Your code here
}</div>
	<button id="run_button">Run</button>
	<div id="code_return"></div>
</body>
</html>
